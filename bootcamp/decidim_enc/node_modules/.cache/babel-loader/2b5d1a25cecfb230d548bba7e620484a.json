{"ast":null,"code":"import AutoButtonsByPositionComponent from \"src/decidim/admin/auto_buttons_by_position.component\";\nimport AutoLabelByPositionComponent from \"src/decidim/admin/auto_label_by_position.component\";\nimport createSortList from \"src/decidim/admin/sort_list.component\";\nimport createDynamicFields from \"src/decidim/admin/dynamic_fields.component\";\nimport createQuillEditor from \"src/decidim/editor\";\nvar wrapperSelector = \".meeting-agenda-items\";\nvar fieldSelector = \".meeting-agenda-item\";\nvar childsWrapperSelector = \".meeting-agenda-item-childs\";\nvar childFieldSelector = \".meeting-agenda-item-child\";\nvar autoLabelByPosition = new AutoLabelByPositionComponent({\n  listSelector: \".meeting-agenda-item:not(.hidden)\",\n  labelSelector: \".card-title span:first\",\n  onPositionComputed: function onPositionComputed(el, idx) {\n    $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n  }\n});\nvar autoButtonsByPosition = new AutoButtonsByPositionComponent({\n  listSelector: \".meeting-agenda-item:not(.hidden)\",\n  hideOnFirstSelector: \".move-up-agenda-item\",\n  hideOnLastSelector: \".move-down-agenda-item\"\n});\nvar createSortableList = function createSortableList() {\n  createSortList(\".meeting-agenda-items-list:not(.published)\", {\n    handle: \".agenda-item-divider\",\n    placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n    forcePlaceholderSize: true,\n    onSortUpdate: function onSortUpdate() {\n      autoLabelByPosition.run();\n    }\n  });\n};\nvar createSortableListChild = function createSortableListChild() {\n  createSortList(\".meeting-agenda-item-childs-list:not(.published)\", {\n    handle: \".agenda-item-child-divider\",\n    placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n    forcePlaceholderSize: true,\n    onSortUpdate: function onSortUpdate() {\n      autoLabelByPosition.run();\n    }\n  });\n};\nvar autoLabelByPositionChild = new AutoLabelByPositionComponent({\n  listSelector: \".meeting-agenda-item-child:not(.hidden)\",\n  labelSelector: \".card-title span:first\",\n  onPositionComputed: function onPositionComputed(el, idx) {\n    $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n  }\n});\nvar autoButtonsByPositionChild = new AutoButtonsByPositionComponent({\n  listSelector: \".meeting-agenda-item-child:not(.hidden)\",\n  hideOnFirstSelector: \".move-up-agenda-item-child\",\n  hideOnLastSelector: \".move-down-agenda-item-child\"\n});\nvar createDynamicFieldsForAgendaItemChilds = function createDynamicFieldsForAgendaItemChilds(fieldId) {\n  return createDynamicFields({\n    placeholderId: \"meeting-agenda-item-child-id\",\n    wrapperSelector: \"#\".concat(fieldId, \" \").concat(childsWrapperSelector),\n    containerSelector: \".meeting-agenda-item-childs-list\",\n    fieldSelector: childFieldSelector,\n    addFieldButtonSelector: \".add-agenda-item-child\",\n    removeFieldButtonSelector: \".remove-agenda-item-child\",\n    moveUpFieldButtonSelector: \".move-up-agenda-item-child\",\n    moveDownFieldButtonSelector: \".move-down-agenda-item-child\",\n    onAddField: function onAddField($field) {\n      createSortableListChild();\n      $field.find(\".editor-container\").each(function (idx, el) {\n        createQuillEditor(el);\n      });\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onRemoveField: function onRemoveField() {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onMoveUpField: function onMoveUpField() {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onMoveDownField: function onMoveDownField() {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    }\n  });\n};\nvar dynamicFieldsForAgendaItemChilds = {};\nvar setupInitialAgendaItemChildAttributes = function setupInitialAgendaItemChildAttributes($target) {\n  var fieldId = $target.attr(\"id\");\n  dynamicFieldsForAgendaItemChilds[fieldId] = createDynamicFieldsForAgendaItemChilds(fieldId);\n};\nvar hideDeletedAgendaItem = function hideDeletedAgendaItem($target) {\n  var inputDeleted = $target.find(\"input[name$=\\\\[deleted\\\\]]\").val();\n  if (inputDeleted === \"true\") {\n    $target.addClass(\"hidden\");\n    $target.hide();\n  }\n};\ncreateDynamicFields({\n  placeholderId: \"meeting-agenda-item-id\",\n  wrapperSelector: wrapperSelector,\n  containerSelector: \".meeting-agenda-items-list\",\n  fieldSelector: fieldSelector,\n  addFieldButtonSelector: \".add-agenda-item\",\n  removeFieldButtonSelector: \".remove-agenda-item\",\n  moveUpFieldButtonSelector: \".move-up-agenda-item\",\n  moveDownFieldButtonSelector: \".move-down-agenda-item\",\n  onAddField: function onAddField($field) {\n    // createDynamicFieldsForAgendaItemChilds($field);\n    setupInitialAgendaItemChildAttributes($field);\n    createSortableList();\n    $field.find(\".editor-container\").each(function (idx, el) {\n      createQuillEditor(el);\n    });\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onRemoveField: function onRemoveField() {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onMoveUpField: function onMoveUpField() {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onMoveDownField: function onMoveDownField() {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  }\n});\ncreateSortableList();\n$(fieldSelector).each(function (idx, el) {\n  var $target = $(el);\n  hideDeletedAgendaItem($target);\n  setupInitialAgendaItemChildAttributes($target);\n});\nautoLabelByPosition.run();\nautoButtonsByPosition.run();\nautoLabelByPositionChild.run();\nautoButtonsByPositionChild.run();","map":{"version":3,"mappings":"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","names":["AutoButtonsByPositionComponent","AutoLabelByPositionComponent","createSortList","createDynamicFields","createQuillEditor","wrapperSelector","fieldSelector","childsWrapperSelector","childFieldSelector","autoLabelByPosition","listSelector","labelSelector","onPositionComputed","el","idx","$","find","val","autoButtonsByPosition","hideOnFirstSelector","hideOnLastSelector","createSortableList","handle","placeholder","forcePlaceholderSize","onSortUpdate","run","createSortableListChild","autoLabelByPositionChild","autoButtonsByPositionChild","createDynamicFieldsForAgendaItemChilds","fieldId","placeholderId","containerSelector","addFieldButtonSelector","removeFieldButtonSelector","moveUpFieldButtonSelector","moveDownFieldButtonSelector","onAddField","$field","each","onRemoveField","onMoveUpField","onMoveDownField","dynamicFieldsForAgendaItemChilds","setupInitialAgendaItemChildAttributes","$target","attr","hideDeletedAgendaItem","inputDeleted","addClass","hide"],"sources":["/home/alan/.rvm/gems/ruby-3.0.3/gems/decidim-meetings-0.27.0/app/packs/src/decidim/meetings/admin/agendas.js"],"sourcesContent":["import AutoButtonsByPositionComponent from \"src/decidim/admin/auto_buttons_by_position.component\"\nimport AutoLabelByPositionComponent from \"src/decidim/admin/auto_label_by_position.component\"\nimport createSortList from \"src/decidim/admin/sort_list.component\"\nimport createDynamicFields from \"src/decidim/admin/dynamic_fields.component\"\nimport createQuillEditor from \"src/decidim/editor\"\n\nconst wrapperSelector = \".meeting-agenda-items\";\nconst fieldSelector = \".meeting-agenda-item\";\nconst childsWrapperSelector = \".meeting-agenda-item-childs\";\nconst childFieldSelector = \".meeting-agenda-item-child\";\n\nconst autoLabelByPosition = new AutoLabelByPositionComponent({\n  listSelector: \".meeting-agenda-item:not(.hidden)\",\n  labelSelector: \".card-title span:first\",\n  onPositionComputed: (el, idx) => {\n    $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n  }\n});\n\nconst autoButtonsByPosition = new AutoButtonsByPositionComponent({\n  listSelector: \".meeting-agenda-item:not(.hidden)\",\n  hideOnFirstSelector: \".move-up-agenda-item\",\n  hideOnLastSelector: \".move-down-agenda-item\"\n});\n\nconst createSortableList = () => {\n  createSortList(\".meeting-agenda-items-list:not(.published)\", {\n    handle: \".agenda-item-divider\",\n    placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n    forcePlaceholderSize: true,\n    onSortUpdate: () => { autoLabelByPosition.run() }\n  });\n};\n\nconst createSortableListChild = () => {\n  createSortList(\".meeting-agenda-item-childs-list:not(.published)\", {\n    handle: \".agenda-item-child-divider\",\n    placeholder: '<div style=\"border-style: dashed; border-color: #000\"></div>',\n    forcePlaceholderSize: true,\n    onSortUpdate: () => { autoLabelByPosition.run() }\n  });\n};\n\nconst autoLabelByPositionChild = new AutoLabelByPositionComponent({\n  listSelector: \".meeting-agenda-item-child:not(.hidden)\",\n  labelSelector: \".card-title span:first\",\n  onPositionComputed: (el, idx) => {\n    $(el).find(\"input[name$=\\\\[position\\\\]]\").val(idx);\n  }\n});\n\nconst autoButtonsByPositionChild = new AutoButtonsByPositionComponent({\n  listSelector: \".meeting-agenda-item-child:not(.hidden)\",\n  hideOnFirstSelector: \".move-up-agenda-item-child\",\n  hideOnLastSelector: \".move-down-agenda-item-child\"\n});\n\nconst createDynamicFieldsForAgendaItemChilds = (fieldId) => {\n  return createDynamicFields({\n    placeholderId: \"meeting-agenda-item-child-id\",\n    wrapperSelector: `#${fieldId} ${childsWrapperSelector}`,\n    containerSelector: \".meeting-agenda-item-childs-list\",\n    fieldSelector: childFieldSelector,\n    addFieldButtonSelector: \".add-agenda-item-child\",\n    removeFieldButtonSelector: \".remove-agenda-item-child\",\n    moveUpFieldButtonSelector: \".move-up-agenda-item-child\",\n    moveDownFieldButtonSelector: \".move-down-agenda-item-child\",\n\n    onAddField: ($field) => {\n      createSortableListChild();\n\n      $field.find(\".editor-container\").each((idx, el) => {\n        createQuillEditor(el);\n      });\n\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onRemoveField: () => {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onMoveUpField: () => {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    },\n    onMoveDownField: () => {\n      autoLabelByPositionChild.run();\n      autoButtonsByPositionChild.run();\n    }\n  });\n};\n\nconst dynamicFieldsForAgendaItemChilds = {};\n\nconst setupInitialAgendaItemChildAttributes = ($target) => {\n  const fieldId = $target.attr(\"id\");\n\n  dynamicFieldsForAgendaItemChilds[fieldId] = createDynamicFieldsForAgendaItemChilds(fieldId);\n\n}\n\nconst hideDeletedAgendaItem = ($target) => {\n  const inputDeleted = $target.find(\"input[name$=\\\\[deleted\\\\]]\").val();\n\n  if (inputDeleted === \"true\") {\n    $target.addClass(\"hidden\");\n    $target.hide();\n  }\n};\n\ncreateDynamicFields({\n  placeholderId: \"meeting-agenda-item-id\",\n  wrapperSelector: wrapperSelector,\n  containerSelector: \".meeting-agenda-items-list\",\n  fieldSelector: fieldSelector,\n  addFieldButtonSelector: \".add-agenda-item\",\n  removeFieldButtonSelector: \".remove-agenda-item\",\n  moveUpFieldButtonSelector: \".move-up-agenda-item\",\n  moveDownFieldButtonSelector: \".move-down-agenda-item\",\n  onAddField: ($field) => {\n    // createDynamicFieldsForAgendaItemChilds($field);\n    setupInitialAgendaItemChildAttributes($field);\n    createSortableList();\n\n    $field.find(\".editor-container\").each((idx, el) => {\n      createQuillEditor(el);\n    });\n\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onRemoveField: () => {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onMoveUpField: () => {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  },\n  onMoveDownField: () => {\n    autoLabelByPosition.run();\n    autoButtonsByPosition.run();\n  }\n});\n\ncreateSortableList();\n\n$(fieldSelector).each((idx, el) => {\n  const $target = $(el);\n\n  hideDeletedAgendaItem($target);\n  setupInitialAgendaItemChildAttributes($target);\n});\n\nautoLabelByPosition.run();\nautoButtonsByPosition.run();\nautoLabelByPositionChild.run();\nautoButtonsByPositionChild.run();\n"]},"metadata":{},"sourceType":"module"}