{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nimport icon from \"src/decidim/icon\";\nvar EXCLUDE_CLASSES = [\"card--list__data__icon\", \"footer-social__icon\", \"logo-cityhall\"];\nvar EXCLUDE_ANCESTOR_CLASSES = [\"editor-container\"];\nvar EXCLUDE_REL = [\"license\", \"decidim\"];\nvar DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nvar MESSAGES = DEFAULT_MESSAGES;\nvar ExternalLink = /*#__PURE__*/function () {\n  function ExternalLink(link) {\n    _classCallCheck(this, ExternalLink);\n    this.$link = link;\n    this.setup();\n  }\n  _createClass(ExternalLink, [{\n    key: \"setup\",\n    value: function setup() {\n      var _this = this;\n      if (EXCLUDE_CLASSES.some(function (cls) {\n        return _this.$link.hasClass(cls);\n      })) {\n        return;\n      }\n      if (EXCLUDE_ANCESTOR_CLASSES.some(function (cls) {\n        return _this.$link.parents().hasClass(cls);\n      })) {\n        return;\n      }\n      if (EXCLUDE_REL.some(function (rel) {\n        var linkRels = \"\".concat(_this.$link.attr(\"rel\")).split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })) {\n        return;\n      }\n      var $target = this.$link;\n      if (this.$link[0].hasAttribute(\"data-external-link-target\")) {\n        $target = $(this.$link.data(\"external-link-target\"), this.$link);\n        if ($target.length < 1) {\n          $target = this.$link;\n        }\n      }\n      $target.addClass(\"external-link-container\");\n      var spacer = \"&nbsp;\";\n      if (this.$link[0].hasAttribute(\"data-external-link-spacer\")) {\n        spacer = this.$link.data(\"external-link-spacer\");\n      } else if ($target.text().trim().length < 1) {\n        // Fixes image links extra space\n        spacer = \"\";\n      }\n      $target.append(\"\".concat(spacer).concat(this.generateElement()));\n    }\n  }, {\n    key: \"generateElement\",\n    value: function generateElement() {\n      var content = \"\".concat(this.generateIcon()).concat(this.generateScreenReaderLabel());\n      return \"<span class=\\\"external-link-indicator\\\">\".concat(content, \"</span>\");\n    }\n  }, {\n    key: \"generateIcon\",\n    value: function generateIcon() {\n      return icon(\"external-link\");\n    }\n  }, {\n    key: \"generateScreenReaderLabel\",\n    value: function generateScreenReaderLabel() {\n      return \"<span class=\\\"show-for-sr\\\">(\".concat(MESSAGES.externalLink, \")</span>\");\n    }\n  }], [{\n    key: \"configureMessages\",\n    value: function configureMessages(messages) {\n      MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n    }\n  }]);\n  return ExternalLink;\n}();\nexport { ExternalLink as default };","map":{"version":3,"mappings":"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","names":["icon","EXCLUDE_CLASSES","EXCLUDE_ANCESTOR_CLASSES","EXCLUDE_REL","DEFAULT_MESSAGES","externalLink","MESSAGES","ExternalLink","link","_classCallCheck","$link","setup","_createClass","key","value","some","cls","_this","hasClass","parents","rel","linkRels","attr","split","indexOf","$target","hasAttribute","$","data","length","addClass","spacer","text","trim","append","generateElement","content","generateIcon","generateScreenReaderLabel","messages","extend"],"sources":["/home/alan/.rvm/gems/ruby-3.0.3/gems/decidim-core-0.27.0/app/packs/src/decidim/external_link.js"],"sourcesContent":["import icon from \"src/decidim/icon\"\n\nconst EXCLUDE_CLASSES = [\n  \"card--list__data__icon\",\n  \"footer-social__icon\",\n  \"logo-cityhall\"\n];\nconst EXCLUDE_ANCESTOR_CLASSES = [\n  \"editor-container\"\n]\nconst EXCLUDE_REL = [\"license\", \"decidim\"];\n\nconst DEFAULT_MESSAGES = {\n  externalLink: \"External link\"\n};\nlet MESSAGES = DEFAULT_MESSAGES;\n\nexport default class ExternalLink {\n  static configureMessages(messages) {\n    MESSAGES = $.extend(DEFAULT_MESSAGES, messages);\n  }\n\n  constructor(link) {\n    this.$link = link;\n\n    this.setup();\n  }\n\n  setup() {\n    if (EXCLUDE_CLASSES.some((cls) => this.$link.hasClass(cls))) {\n      return;\n    }\n    if (EXCLUDE_ANCESTOR_CLASSES.some((cls) => this.$link.parents().hasClass(cls))) {\n      return;\n    }\n    if (\n      EXCLUDE_REL.some((rel) => {\n        const linkRels = `${this.$link.attr(\"rel\")}`.split(\" \");\n        return linkRels.indexOf(rel) > -1;\n      })\n    ) {\n      return;\n    }\n\n    let $target = this.$link;\n    if (this.$link[0].hasAttribute(\"data-external-link-target\")) {\n      $target = $(this.$link.data(\"external-link-target\"), this.$link);\n      if ($target.length < 1) {\n        $target = this.$link;\n      }\n    }\n\n    $target.addClass(\"external-link-container\");\n    let spacer = \"&nbsp;\";\n    if (this.$link[0].hasAttribute(\"data-external-link-spacer\")) {\n      spacer = this.$link.data(\"external-link-spacer\");\n    } else if ($target.text().trim().length < 1) {\n      // Fixes image links extra space\n      spacer = \"\";\n    }\n\n    $target.append(`${spacer}${this.generateElement()}`);\n  }\n\n  generateElement() {\n    let content = `${this.generateIcon()}${this.generateScreenReaderLabel()}`;\n\n    return `<span class=\"external-link-indicator\">${content}</span>`;\n  }\n\n  generateIcon() {\n    return icon(\"external-link\");\n  }\n\n  generateScreenReaderLabel() {\n    return `<span class=\"show-for-sr\">(${MESSAGES.externalLink})</span>`;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}