{"ast":null,"code":"import { datalistSelect } from \"src/decidim/datalist_select\";\n$(function () {\n  var wrapper = document.querySelector(\"#choose-template\");\n  if (!wrapper) {\n    return;\n  }\n  var preview = function preview(id) {\n    var options = wrapper.dataset;\n    var previewURL = options.previewurl;\n    if (!previewURL) {\n      return;\n    }\n    var params = new URLSearchParams({\n      id: id\n    });\n    fetch(\"\".concat(previewURL, \"?\").concat(params.toString()), {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (response) {\n      return response.text();\n    }).then(function (data) {\n      var script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.innerHTML = data;\n      document.getElementsByTagName(\"head\")[0].appendChild(script);\n    })[\"catch\"](function (error) {\n      console.error(error); // eslint-disable-line no-console\n    });\n  };\n\n  datalistSelect(wrapper, preview);\n});","map":{"version":3,"mappings":"AAAA,SAASA,cAAc,QAAQ,6BAA6B;AAE5DC,CAAC,CAAC,YAAM;EACN,IAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,kBAAkB,CAAC;EAC1D,IAAI,CAACF,OAAO,EAAE;IACZ;EACF;EAEA,IAAMG,OAAO,GAAG,SAAVA,OAAO,CAAIC,EAAE,EAAK;IACtB,IAAMC,OAAO,GAAGL,OAAO,CAACM,OAAO;IAC/B,IAAMC,UAAU,GAAGF,OAAO,CAACG,UAAU;IACrC,IAAI,CAACD,UAAU,EAAE;MACf;IACF;IACA,IAAME,MAAM,GAAG,IAAIC,eAAe,CAAC;MAAEN,EAAE,EAAEA;IAAG,CAAC,CAAC;IAC9CO,KAAK,WAAIJ,UAAU,cAAIE,MAAM,CAACG,QAAQ,EAAE,GAAI;MAC1CC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB;IAChD,CAAC,CAAC,CAACC,IAAI,CAAC,UAACC,QAAQ;MAAA,OAAKA,QAAQ,CAACC,IAAI,EAAE;IAAA,EAAC,CAACF,IAAI,CAAC,UAACG,IAAI,EAAK;MACpD,IAAMC,MAAM,GAAGlB,QAAQ,CAACmB,aAAa,CAAC,QAAQ,CAAC;MAC/CD,MAAM,CAACE,IAAI,GAAG,iBAAiB;MAC/BF,MAAM,CAACG,SAAS,GAAGJ,IAAI;MACvBjB,QAAQ,CAACsB,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACC,WAAW,CAACL,MAAM,CAAC;IAC9D,CAAC,CAAC,SAAM,CAAC,UAACM,KAAK,EAAK;MAClBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CAAC,CAAC;IACxB,CAAC,CAAC;EACJ,CAAC;;EAED3B,cAAc,CAACE,OAAO,EAAEG,OAAO,CAAC;AAClC,CAAC,CAAC","names":["datalistSelect","$","wrapper","document","querySelector","preview","id","options","dataset","previewURL","previewurl","params","URLSearchParams","fetch","toString","method","headers","then","response","text","data","script","createElement","type","innerHTML","getElementsByTagName","appendChild","error","console"],"sources":["/home/alan/.rvm/gems/ruby-3.0.3/gems/decidim-templates-0.27.0/app/packs/src/decidim/templates/admin/choose_template.js"],"sourcesContent":["import { datalistSelect } from \"src/decidim/datalist_select\";\n\n$(() => {\n  const wrapper = document.querySelector(\"#choose-template\");\n  if (!wrapper) {\n    return;\n  }\n\n  const preview = (id) => {\n    const options = wrapper.dataset;\n    const previewURL = options.previewurl;\n    if (!previewURL) {\n      return;\n    }\n    const params = new URLSearchParams({ id: id });\n    fetch(`${previewURL}?${params.toString()}`, {\n      method: \"GET\",\n      headers: { \"Content-Type\": \"application/json\" }\n    }).then((response) => response.text()).then((data) => {\n      const script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.innerHTML = data;\n      document.getElementsByTagName(\"head\")[0].appendChild(script);\n    }).catch((error) => {\n      console.error(error); // eslint-disable-line no-console\n    });\n  }\n\n  datalistSelect(wrapper, preview)\n})\n"]},"metadata":{},"sourceType":"module"}